@model List<SugarM.Models.Override>
@{
    ViewData["Title"] = "Override";
}


<section class="content-wrapper">

    <!-- Main content -->
    <section class="content">
        <!-- Default box -->
      <section class="box box-danger">
            <div class="box-header with-border">
                <h3 class="box-title text-primary"><i class="fa fa-users"></i> @ViewData["Title"]</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
                            title="Collapse">
                        <i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
        <!---- Company -->
        <div class="box-body">
             <div class="Override">
                <div class="row">
                 <div class="col-sm-6" style="padding-left: 25px;margin-top: 10px;">
                    <div class="mb-md">
                    <a class="btn btn-primary" asp-action="Create" data-controller="Override" data-action="Create"><i class="fa fa-plus"></i> Add New</a>
                    @*<button id="Delect" type="button" class="mb-xs mt-xs mr-xs btn btn-danger" onclick="return testCheck();">Delect</button>*@
                     </div>
                 </div>
                </div>
                 <table id="tableOverride" class="table table-striped table-bordered" style="width:100%;">
                     <thead>
                         <tr>
                             <th>ระดับผู้อนุมัติ</th>
                             <th>รายละเอียด</th>
                             <th>MinAmount</th>
                             <th>MaxAmount</th>
                             <th>การใช้งาน</th>
                             <th></th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var item in Model)
                         {
                             <tr>
                                 <td>@item.OverrideLevel</td>
                                 <td>@item.Description</td>
                                 <td>@item.MinAmount</td>
                                 <td>@item.MaxAmount</td>
                                 <td>@item.Active</td>
                                 <td> 
                                      <a id="detailCarModal" asp-action="Edit" data-currentpage="" asp-route-OverrideLevel="@item.OverrideLevel" asp-route-CompCode="@item.CompCode" asp-route-CaneYear="@item.CaneYear" class="btn btn-success btn-sm">
                                            <i class="fa fa-folder-open-o" data-OverrideLevel="@item.OverrideLevel"></i> รายละเอียด
                                        </a>
                                        <a id="deleteCarModal" asp-action="Delete" asp-route-id="@item.OverrideLevel"
                                           class="btn btn-danger btn-sm delete"
                                           data-id="@item.CompCode"
                                           data-id1="@item.CaneYear"
                                           data-id2="@item.OverrideLevel"
                                           data-controller="Override"
                                           data-ta="#tableOverride"
                                           data-action="Delete"
                                           data-body-message="คุณต้องการลบข้อมูลข้อมูลประเภทโควต้า @item.CompCode ใช่หรือไม่?">
                                            <i class="fa fa-pencil" data-id="@item.CompCode"></i> ลบข้อมูล
                                        </a>
 
                                </td>
                             </tr>
                         }
                     </tbody>
                 </table>
               @*   @ViewBag.PaginationHtml *@
             @*     @await Html.PartialAsync("_Pagination", 10) *@
              </div>
        </div>
        <div class="overlay hidden">
            <i class="fa fa-refresh fa-spin hidden"></i>
        </div>
</div>                 
        </div>
</section>
        </section>
   
    </section>
        <!-- /.box -->
    </section>
    <!-- /.content -->
</div>
@section Scripts{
    <script>
    $(document).ready(function() {
    var table = $("#tableOverride").DataTable({
        bDestroy: true, //ทำลายอันเก่าทิ้งแล้วรอคำสั่ง reload
		paging: true, //showpaging
		lengthChange: false,
		searching: true,
		ordering: true,
		info: true,
		autoWidth: false,
        order: [[1, "asc"]],
		language: {
			emptyTable: "No data found, Please click on <b>Add New</b> Button",
			sSearch: "ค้นหา",
			sLengthMenu: "แสดงข้อมูลทีละ _MENU_ ข้อมูล",
			sInfo: "ข้อมูล _START_ ถึง _END_ จากทั้งหมด _TOTAL_ ข้อมูล",
			oPaginate: {
				sFirst: "หน้าแรก",
				sPrevious: "ก่อนหน้า",
				sNext: "ถัดไป",
				sLast: "หน้าสุดท้าย"
			}
	    }
     });

     $("#tableGrade").on("click", "#deleteCarModal", function(e) {
         $(".overlay").removeClass("hidden");
        $(".fa-refresh").removeClass("hidden");
     });
    });
    </script>
}